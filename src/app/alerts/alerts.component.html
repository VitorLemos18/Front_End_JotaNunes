<div class="alerts-container">
  <!-- Header -->
  <div class="header flex items-center justify-between mb-6">
    <div>
      <h2 class="text-2xl font-bold text-gray-900">Alertas de Customizações</h2>
      <p class="text-sm text-gray-500">
        Você tem {{ notificacoesNaoLidas }} alertas não lidos relacionados a customizações
      </p>
    </div>
    <div class="actions space-x-2">
      <button mat-stroked-button color="primary" (click)="marcarTodasComoLidas()">
        <lucide-angular name="check-circle" class="mr-1"></lucide-angular>
        Marcar todas como lidas
      </button>
      <button mat-stroked-button color="warn" (click)="limparTudo()">
        <lucide-angular name="trash-2" class="mr-1"></lucide-angular>
        Limpar tudo
      </button>
    </div>
  </div>

  <!-- Status Cards -->
  <div class="status-grid grid grid-cols-3 gap-4 mb-6">
    <div class="status-card critical bg-red-100 text-red-700 flex items-center justify-center p-4 rounded-xl font-semibold">
      <lucide-angular name="alert-octagon" class="mr-2"></lucide-angular>
      <span>{{ alertasCriticos }} Alertas Críticos</span>
    </div>
    <div class="status-card info bg-blue-100 text-blue-700 flex items-center justify-center p-4 rounded-xl font-semibold">
      <lucide-angular name="info" class="mr-2"></lucide-angular>
      <span>{{ informacoes }} Informações</span>
    </div>
    <div class="status-card success bg-green-100 text-green-700 flex items-center justify-center p-4 rounded-xl font-semibold">
      <lucide-angular name="check" class="mr-2"></lucide-angular>
      <span>{{ confirmacoes }} Confirmações</span>
    </div>
  </div>

  <!-- Tabs -->
  <div class="tabs flex space-x-6 border-b border-gray-300 mb-4">
    <button
      *ngFor="let f of filtros"
      (click)="filtroAtivo = f"
      [ngClass]="{ 'text-a00000 border-b-2 border-a00000': filtroAtivo === f }"
      class="pb-2 font-medium text-gray-600 hover:text-a00000 transition-all"
    >
      {{ f }}
    </button>
  </div>

  <!-- Lista de alertas -->
  <div class="alerts-list space-y-3" *ngIf="!loading; else loadingTemplate">
    <div *ngIf="alertas.length > 0; else noResults">
      <div
        *ngFor="let a of filtrarAlertas()"
        class="alert-item bg-white shadow-sm p-4 rounded-xl flex justify-between items-start border border-gray-100 hover:shadow-md transition-all"
        [ngClass]="{ 'bg-red-50': a.tipo === 'alerta' && !a.lida }"
      >
        <div class="alert-content flex-1">
          <h4 class="font-semibold text-gray-800">{{ a.titulo }}</h4>
          <p class="text-gray-600 text-sm">{{ a.descricao }}</p>
          <div class="alert-meta text-xs text-gray-400 mt-2 flex items-center">
            <lucide-angular name="clock" class="w-4 h-4 mr-1"></lucide-angular>
            {{ a.tempo }}
            <span *ngIf="a.urgente" class="ml-2 px-2 py-0.5 bg-a00000 text-white rounded text-[10px] uppercase font-bold">Urgente</span>
          </div>
        </div>
        <div class="alert-actions flex flex-col items-end space-y-2">
          <lucide-angular
            *ngIf="!a.lida"
            name="alert-triangle"
            class="text-a00000 cursor-pointer"
            (click)="marcarComoLida(a)"
          ></lucide-angular>
          <lucide-angular
            *ngIf="a.lida"
            name="check"
            class="text-green-600"
          ></lucide-angular>
          <lucide-angular
            name="trash-2"
            class="text-gray-400 hover:text-a00000 cursor-pointer"
            (click)="remover(a)"
          ></lucide-angular>
        </div>
      </div>
    </div>
    <ng-template #noResults>
      <div class="no-results text-center p-4">{{ error || 'Nenhum alerta encontrado.' }}</div>
    </ng-template>
  </div>

  <ng-template #loadingTemplate>
    <div class="loading text-center p-4">Carregando...</div>
  </ng-template>
</div>